package org.example.recursion.p106_107;

// λ¬Έμ : μ£Όμ–΄μ§„ λ°°μ—΄ Aμ™€ μ •μ Mμ— λ€ν•΄, μ—°μ†λ λ¶€λ¶„ λ°°μ—΄μ ν•©μ΄ Mμ΄ λλ” κ²½μ°μ μλ¥Ό κµ¬ν•μ„Έμ”.

public class TwoPointer {
    public static void main(String[] args) {
        // μ£Όμ–΄μ§„ λ°°μ—΄κ³Ό Mμ κ°’
        //int[] A = {10, 20, 30, 40, 10, 20, 30, 30, 40};
        int[] A = {10, 5, 5, 5, 5, 20, 10, 50, 40};
        int M = 30; // λ©ν‘ ν•© (PDF λ‚΄μ©) β†’ π΄ = 10, 20, 30, 40, 10, 20, 30, 30, 40 , π‘€ = 30μ΄λΌλ©΄?

        // ν¬ ν¬μΈν„° μ•κ³ λ¦¬μ¦μ„ μ‚¬μ©ν•μ—¬ κ²½μ°μ μλ¥Ό κ³„μ‚°
        int count = findSubarrayCount(A, M);

        // κ²°κ³Ό μ¶λ ¥
        System.out.println("λ¶€λ¶„ λ°°μ—΄μ ν•©μ΄ " + M + "μ΄ λλ” κ²½μ°μ μ: " + count);
    }

    /**
     * ν¬ ν¬μΈν„° μ•κ³ λ¦¬μ¦μ„ μ‚¬μ©ν•μ—¬ λ¶€λ¶„ λ°°μ—΄μ ν•©μ΄ Mμ΄ λλ” κ²½μ°μ μλ¥Ό κ³„μ‚°ν•λ” λ©”μ„λ“
     *
     * @param arr μ…λ ¥ λ°°μ—΄
     * @param m λ©ν‘ ν•©
     * @return μ΅°κ±΄μ„ λ§μ΅±ν•λ” λ¶€λ¶„ λ°°μ—΄μ μ
     */
    public static int findSubarrayCount(int[] arr, int m) {
        int s = 0; // μ‹μ‘ ν¬μΈν„°
        int e = 0; // λ ν¬μΈν„°
        int sum = 0; // ν„μ¬ λ¶€λ¶„ν•©
        int count = 0; // μ΅°κ±΄μ„ λ§μ΅±ν•λ” λ¶€λ¶„ λ°°μ—΄μ μ

        // λ ν¬μΈν„°λ¥Ό λ°°μ—΄μ λκΉμ§€ μ΄λ™
        while (e < arr.length) {
            // λ¶€λ¶„ν•©μ— e μ„μΉμ κ°’μ„ μ¶”κ°€
            sum += arr[e];

            // λ¶€λ¶„ν•©μ΄ λ©ν‘ κ°’λ³΄λ‹¤ ν¬κ±°λ‚ κ°™μΌλ©΄, μ‹μ‘ ν¬μΈν„°λ¥Ό μ΄λ™ν•μ—¬ μ΅°κ±΄μ„ λ§μ΅±ν•λ„λ΅ μ΅°μ •
            while (sum > m && s <= e) {
                sum -= arr[s]; // s μ„μΉμ κ°’μ„ μ κ±°
                s++; // μ‹μ‘ ν¬μΈν„° μ΄λ™
            }

            // λ¶€λ¶„ν•©μ΄ λ©ν‘ κ°’κ³Ό κ°™μΌλ©΄ μΉ΄μ΄νΈ μ¦κ°€
            if (sum == m) {
                count++;
            }

            // λ ν¬μΈν„° μ΄λ™
            e++;
        }

        return count;
    }
}
